<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Display</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>

<div class="bgm-color-container" id="bgm-color-container"></div>

<div class="container">
    <div class="text-content">
        <h2 id="product-subtitle">Immerse in pure sound, where innovation meets comfort</h2>
        <h1 class="product-title" id="product-title"></h1>
        <h2 id="product-brand"></h2>
        <p id="product-description" class="product-description"></p>
        <div class="buttons">
            <a href="#product-specs-section" class="btn btn-know-more" id="know-more-btn">Know More</a>
            <a href="#" class="btn btn-buy-now">Buy Now</a>
        </div>
    </div>
    <div class="image-content">
        <img id="main-product-image" class="product-image" src="" alt="Product Image">
        <div class="color-options" id="color-options"></div>
    </div>
</div>

<section id="product-specs-section">
    <div class="specs-content">
        <h2 id="specs-title">Specifications</h2>
        <ul id="specs-list"></ul>
        <div style="text-align: center; margin-top: 20px;">
            <a href="#" class="btn btn-know-more">Back to Top</a>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const API_URL = "https://api.jsonbin.io/v3/b/6897667d43b1c97be91a4fe4/latest";
    const X_MASTER_KEY = "YOUR_JSONBIN_SECRET_KEY"; // Replace with your key

    const root = document.documentElement;
    const imgEl = document.getElementById('main-product-image');
    const descEl = document.getElementById('product-description');
    const specsTitle = document.getElementById('specs-title');
    const specsList = document.getElementById('specs-list');
    const colorOptions = document.getElementById('color-options');

    function updateProduct(variant) {
        imgEl.src = variant.image;
        root.style.setProperty('--primary-text-color', variant.primary);
        root.style.setProperty('--secondary-text-color', variant.secondary);
        root.style.setProperty('--accent-color', variant.accent);
        root.style.setProperty('--button-know-more-bg', variant.knowMoreBg);
        root.style.setProperty('--button-know-more-text', variant.knowMoreText);
        root.style.setProperty('--container-bg-color', variant.containerBg);
        root.style.setProperty('--bgm-color-start', variant.bgmStart);
        root.style.setProperty('--bgm-color-end', variant.bgmEnd);

        descEl.textContent = variant.description;
        specsTitle.textContent = variant.specsTitle;
        specsList.innerHTML = '';
        variant.specs.forEach(spec => {
            const li = document.createElement('li');
            li.textContent = spec;
            specsList.appendChild(li);
        });
    }

    fetch(API_URL, {
        headers: { "X-Master-Key": X_MASTER_KEY }
    })
    .then(res => res.json())
    .then(data => {
        const record = data.record;

        document.getElementById('product-title').textContent = "AirPods 4";
        document.getElementById('product-brand').textContent = "By boAt";

        record.variants.forEach(variant => {
            const swatch = document.createElement('div');
            swatch.classList.add('color-swatch', variant.id);
            swatch.style.backgroundColor = variant.accent;
            swatch.addEventListener('click', () => updateProduct(variant));
            colorOptions.appendChild(swatch);
        });

        const defaultVariant = record.variants.find(v => v.id === record.defaultColor);
        updateProduct(defaultVariant);
    })
    .catch(err => console.error("API Error:", err));
});
</script>

</body>
</html>
